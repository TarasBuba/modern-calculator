// ============================================================================
// –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† –ó –ü–Ü–î–¢–†–ò–ú–ö–û–Æ –î–£–ñ–û–ö –¢–ê –ü–†–Ü–û–†–ò–¢–ï–¢–£ –û–ü–ï–†–ê–¶–Ü–ô
// ============================================================================
// –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞: 4 –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É —Ç–∞ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—ñ–≤
// 1. checkingString() - —Ä–æ–∑–±–∏–≤–∞—î —Ä—è–¥–æ–∫ –Ω–∞ —á–∏—Å–ª–∞ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
// 2. mathInsideBreckets() - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–æ–±–ª—è—î –≤–∏—Ä–∞–∑–∏ –≤ –¥—É–∂–∫–∞—Ö
// 3. priorityOfSymbols() - –≤–∏–∫–æ–Ω—É—î –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É (* / –ø–µ—Ä–µ–¥ + -)
// 4. mainChekingString() - –≥–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω—É—î –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å
// ============================================================================

// ==================== –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü ====================

// displayString - –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—Ç–æ—á–Ω–∏–π –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏—Ä–∞–∑ —è–∫ —Ä—è–¥–æ–∫
// –ü—Ä–∏–∫–ª–∞–¥: "5+3*2" –∞–±–æ "10/(2+3)"
let displayString = ''

// –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ DOM –µ–ª–µ–º–µ–Ω—Ç–∏
const displayExpresion = document.getElementById('display');    // –í–µ—Ä—Ö–Ω—ñ–π –¥–∏—Å–ø–ª–µ–π - –≤–∏—Ä–∞–∑
const displayResult = document.getElementById('display2');      // –ù–∏–∂–Ω—ñ–π –¥–∏—Å–ø–ª–µ–π - —Ä–µ–∑—É–ª—å—Ç–∞—Ç

// result - –∑–±–µ—Ä—ñ–≥–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
let result;

// –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ –∫–Ω–æ–ø–∫–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
const allBtns = document.querySelectorAll('.buttons-grid button')

// –°–∫–æ—Ä–æ—á–µ–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–µ—Ä—Ö–Ω—ñ–π –¥–∏—Å–ø–ª–µ–π
const display = displayExpresion;

// redFlag - –ø—Ä–∞–ø–æ—Ä–µ—Ü—å, —è–∫–∏–π –≤–∫–∞–∑—É—î —á–∏ –±—É–ª–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ "=" (–¥–ª—è –ª–æ–≥—ñ–∫–∏ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É)
// true = –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —â–æ–π–Ω–æ –æ—Ç—Ä–∏–º–∞–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–∞—Å—Ç—É–ø–Ω–∞ —Ü–∏—Ñ—Ä–∞ –∑–∞–º—ñ–Ω–∏—Ç—å –≤–∏—Ä–∞–∑
// false = –∑–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º –≤–≤–µ–¥–µ–Ω–Ω—è
let redFlag = false;

// –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∏ —Å–∏–º–≤–æ–ª —î —Ü–∏—Ñ—Ä–æ—é (0-9)
let regExpForNums = /[0-9]/

// ==================== –ì–û–õ–û–í–ù–ò–ô –û–ë–†–û–ë–ù–ò–ö –ü–û–î–Ü–ô –ö–ù–û–ü–û–ö ====================

// –î–ª—è –∫–æ–∂–Ω–æ—ó –∫–Ω–æ–ø–∫–∏ –¥–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É
allBtns.forEach(btn => {
    btn.addEventListener('click', (e) => {
        
        // ========== –û–ë–†–û–ë–ö–ê –ö–ù–û–ü–ö–ò "=" (–û–ë–ß–ò–°–õ–ï–ù–ù–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–£) ==========
        if (e.target.classList.contains('btn-equals')) {
            // –ó–∞–º—ñ–Ω—é—î–º–æ —Å–∏–º–≤–æ–ª √ó –Ω–∞ * –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ (√ó –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è, * –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å)
            let result = mainChekingString(display.value.replaceAll('√ó', '*'));
            
            // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –Ω–∏–∂–Ω—å–æ–º—É –¥–∏—Å–ø–ª–µ—ó
            displayResult.value = result;
            
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —è–∫ —Ä—è–¥–æ–∫ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
            displayString = String(result);

            // –Ø–∫—â–æ —î —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –º—ñ–Ω—è—î–º–æ —Å—Ç–∏–ª—ñ –¥–∏—Å–ø–ª–µ—ó–≤ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ç–∞—î –±—ñ–ª—å—à–∏–º)
            if (displayResult.value !== '') {
                displayResult.classList.remove('display2')     // –†–æ–±–∏–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ–ª–æ–≤–Ω–∏–º
                displayExpresion.classList.add('display2')      // –†–æ–±–∏–º–æ –≤–∏—Ä–∞–∑ –≤—Ç–æ—Ä–∏–Ω–Ω–∏–º
            }
            
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º–∞–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            redFlag = true;
        }

        // ========== –û–ë–†–û–ë–ö–ê –¶–ò–§–†, –û–ü–ï–†–ê–¢–û–†–Ü–í –¢–ê –°–ü–ï–¶–°–ò–ú–í–û–õ–Ü–í ==========
        if (e.target.classList.contains('btn-number') || 
            e.target.classList.contains('btn-operator') || 
            e.target.classList.contains('btn-special')) {
            
            // –û—Ç—Ä–∏–º—É—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –≤–≤–µ–¥–µ–Ω–∏–π —Å–∏–º–≤–æ–ª
            let lastChar = display.value[display.value.length - 1];
            
            // –ê–í–¢–û–ú–ê–¢–ò–ß–ù–ï –î–û–î–ê–í–ê–ù–ù–Ø –ú–ù–û–ñ–ï–ù–ù–Ø:
            // 1. –Ø–∫—â–æ –ø—ñ—Å–ª—è —Ü–∏—Ñ—Ä–∏ –π–¥–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–∞ –¥—É–∂–∫–∞: "5(" ‚Üí "5√ó("
            // 2. –Ø–∫—â–æ –ø—ñ—Å–ª—è –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏ –π–¥–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–∞: ")(" ‚Üí ")√ó("
            // (–õ–æ–≥—ñ–∫–∞ —è–∫ –Ω–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ñ iPhone)
            if (e.target.id === 'brecketLeft' && regExpForNums.test(lastChar) || 
                lastChar === ')' && e.target.id === 'brecketLeft') {
                
                // –Ø–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª "0" - –Ω–µ –¥–æ–¥–∞—î–º–æ –º–Ω–æ–∂–µ–Ω–Ω—è
                if (lastChar === '0') {
                    lastChar = ''
                } else {
                    displayString += '√ó'  // –î–æ–¥–∞—î–º–æ –º–Ω–æ–∂–µ–Ω–Ω—è
                }
            }
            
            // –Ø–∫—â–æ —î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ - –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –Ω–æ—Ä–º–∞–ª—å–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            if (displayResult.value !== '') {
                displayResult.classList.add('display2');        // –•–æ–≤–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                displayExpresion.classList.remove('display2');  // –ü–æ–∫–∞–∑—É—î–º–æ –≤–∏—Ä–∞–∑
            }
            
            // –õ–û–ì–Ü–ö–ê –ü–Ü–°–õ–Ø –ù–ê–¢–ò–°–ö–ê–ù–ù–Ø "=":
            
            // –í–∏–ø–∞–¥–æ–∫ 1: –ü—ñ—Å–ª—è "=" –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –¶–ò–§–†–£
            // –î—ñ—è: –û—á–∏—â–∞—î–º–æ –µ–∫—Ä–∞–Ω —ñ –ø–æ—á–∏–Ω–∞—î–º–æ –Ω–æ–≤–∏–π –≤–∏—Ä–∞–∑ –∑ —Ü—ñ—î—ó —Ü–∏—Ñ—Ä–∏
            if (redFlag === true && e.target.classList.contains('btn-number')) {
                displayString = '';  // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–∏—Ä–∞–∑
                displayString = e.target.dataset.symbols;  // –ù–æ–≤–∞ —Ü–∏—Ñ—Ä–∞ —Å—Ç–∞—î –ø–æ—á–∞—Ç–∫–æ–º
                display.value = displayString.replaceAll('*', '√ó');  // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ
                redFlag = false;  // –°–∫–∏–¥–∞—î–º–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å
                return;
            } 
            
            // –í–∏–ø–∞–¥–æ–∫ 2: –ü—ñ—Å–ª—è "=" –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –û–ü–ï–†–ê–¢–û–† (+, -, *, /)
            // –î—ñ—è: –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ –≤–∏—Ä–∞–∑ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: —Ä–µ–∑—É–ª—å—Ç–∞—Ç "10" + "5")
            else if (redFlag === true && e.target.classList.contains('btn-operator')) {
                displayString = display.value + e.target.dataset.symbols  // –î–æ–¥–∞—î–º–æ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                display.value = displayString.replaceAll('*', '√ó')
                liveResults(displayExpresion.value)  // –û–Ω–æ–≤–ª—é—î–º–æ live —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                redFlag = false
                return;
            } 
            
            // –í–∏–ø–∞–¥–æ–∫ 3: –ó–≤–∏—á–∞–π–Ω–µ –≤–≤–µ–¥–µ–Ω–Ω—è (redFlag = false)
            // –î—ñ—è: –î–æ–¥–∞—î–º–æ —Å–∏–º–≤–æ–ª –¥–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –≤–∏—Ä–∞–∑—É
            else if (redFlag === false) {
                displayString += e.target.dataset.symbols  // –î–æ–¥–∞—î–º–æ —Å–∏–º–≤–æ–ª
                display.value = displayString.replaceAll('*', '√ó');  // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ
                liveResults(display.value)  // –û–Ω–æ–≤–ª—é—î–º–æ live —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            }

        } 
        
        // ========== –û–ë–†–û–ë–ö–ê –°–õ–£–ñ–ë–û–í–ò–• –ö–ù–û–ü–û–ö (AC, DEL) ==========
        else if (e.target.classList.contains('btn-action')) {
            
            // –ö–Ω–æ–ø–∫–∞ "AC" (All Clear) - –ø–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è
            if (e.target.id === 'ac') {
                display.value = '0'       // –î–∏—Å–ø–ª–µ–π –ø–æ–∫–∞–∑—É—î "0"
                displayString = '';       // –û—á–∏—â–∞—î–º–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Ä—è–¥–æ–∫
                displayResult.value = ''; // –û—á–∏—â–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                redFlag = false;          // –°–∫–∏–¥–∞—î–º–æ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å
            }
            
            // –ö–Ω–æ–ø–∫–∞ "DEL" (Delete) - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ —Å–∏–º–≤–æ–ª—É
            else if (e.target.id === 'del') {
                // –í–∏–¥–∞–ª—è—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª –∑ –¥–∏—Å–ø–ª–µ—é —Ç–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ —Ä—è–¥–∫–∞
                display.value = display.value.slice(0, -1)
                displayString = displayString.slice(0, -1)
                
                // –Ø–∫—â–æ –ø—ñ—Å–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∏—Å–ø–ª–µ–π –ø–æ—Ä–æ–∂–Ω—ñ–π - –ø–æ–∫–∞–∑—É—î–º–æ "0"
                if (display.value === '') {
                    display.value = '0'
                    displayString = ''
                }
                
                redFlag = false;
                return;
            }
        }
        
        // –û–Ω–æ–≤–ª—é—î–º–æ live —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ—Å–ª—è –±—É–¥—å-—è–∫–æ—ó –¥—ñ—ó
        liveResults(display.value)
    })
})

// ==================== –í–ê–õ–Ü–î–ê–¶–Ü–Ø –í–í–ï–î–ï–ù–ù–Ø ====================

// –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑: –¥–æ–∑–≤–æ–ª—è—î —Ç—ñ–ª—å–∫–∏ —Ü–∏—Ñ—Ä–∏, –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏, –¥—É–∂–∫–∏, –∫—Ä–∞–ø–∫—É, –ø—Ä–æ–±—ñ–ª–∏ —Ç–∞ √ó
// –ü—Ä–∏–º—ñ—Ç–∫–∞: –ù–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è √ó –≤ –ø–∞—Ç–µ—Ä–Ω –ø—ñ—à–ª–∞ –≥–æ–¥–∏–Ω–∞ –¥–µ–±–∞–≥—É üòÖ
const calcRegExp = /^[0-9+\-*/().\s√ó]+$/;

// –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –≤–≤–µ–¥–µ–Ω–Ω—è –∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
displayExpresion.addEventListener('input', (e) => {
    let currExpresion = e.target.value;
    liveResults(currExpresion)  // –û–Ω–æ–≤–ª—é—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –∫–æ–∂–µ–Ω –≤–≤—ñ–¥
})

// ==================== LIVE –†–ï–ó–£–õ–¨–¢–ê–¢ (–æ–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–∞ –ª—å–æ—Ç—É) ====================

/**
 * –§—É–Ω–∫—Ü—ñ—è liveResults() - –ø–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—ñ–¥ —á–∞—Å –≤–≤–µ–¥–µ–Ω–Ω—è –≤–∏—Ä–∞–∑—É
 * –ü—Ä–∞—Ü—é—î —è–∫ –≤ Google Calculator - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
 * 
 * @param {string} currExpresion - –ø–æ—Ç–æ—á–Ω–∏–π –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏—Ä–∞–∑
 */
function liveResults(currExpresion) {
    // –ú–∞—Å–∏–≤ –≤—Å—ñ—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
    let arrOfSymbols = ['-', '+', '*', '/', '√ó'];
    
    // –û—Å—Ç–∞–Ω–Ω—ñ–π —Ç–∞ –ø–µ—Ä–µ–¥–æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª–∏ —É –≤–∏—Ä–∞–∑—ñ
    let lastChar = currExpresion[currExpresion.length - 1]
    let preLastChar = currExpresion[currExpresion.length - 2]

    // –í–ê–õ–Ü–î–ê–¶–Ü–Ø 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–µ–¥–æ–∑–≤–æ–ª–µ–Ω—ñ —Å–∏–º–≤–æ–ª–∏
    // –Ø–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª –Ω–µ –ø—Ä–æ–π—à–æ–≤ regex - –≤–∏–¥–∞–ª—è—î–º–æ –π–æ–≥–æ
    if (!calcRegExp.test(lastChar)) {
        displayExpresion.value = displayExpresion.value.slice(0, -1);
        displayString = displayExpresion.value.replaceAll('√ó', '*')
    }
    
    // –í–ê–õ–Ü–î–ê–¶–Ü–Ø 2: –ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–æ–¥–≤—ñ–π–Ω–∏–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ "5++" ‚Üí "5+")
    // –Ø–∫—â–æ –¥–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ –ø—ñ–¥—Ä—è–¥ - –≤–∏–¥–∞–ª—è—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π
    else if (preLastChar && arrOfSymbols.includes(lastChar) && arrOfSymbols.includes(preLastChar)) {
        displayExpresion.value = displayExpresion.value.slice(0, -1);
        displayString = displayExpresion.value.replaceAll('√ó', '*')
    }
    
    // –í–ê–õ–Ü–î–ê–¶–Ü–Ø 3: –Ø–∫—â–æ –≤–∏—Ä–∞–∑ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º - –Ω–µ –ø–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    // –ü—Ä–∏–∫–ª–∞–¥: "5+" - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —â–µ –Ω–µ–º–∞—î, –±–æ –≤–∏—Ä–∞–∑ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–π
    else if (arrOfSymbols.includes(lastChar)) {
        displayResult.value = ''
    }
    
    // –û–ë–ß–ò–°–õ–ï–ù–ù–Ø: –Ø–∫—â–æ –≤–∏—Ä–∞–∑ –∫–æ—Ä–µ–∫—Ç–Ω–∏–π - –ø–æ–∫–∞–∑—É—î–º–æ live —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    else {
        displayResult.value = mainChekingString(displayExpresion.value.replaceAll('√ó', '*'))
    }
}

// ============================================================================
// –ë–õ–û–ö –§–£–ù–ö–¶–Ü–ô –î–õ–Ø –ü–ê–†–°–ò–ù–ì–£ –¢–ê –û–ë–ß–ò–°–õ–ï–ù–ù–Ø –í–ò–†–ê–ó–Ü–í
// ============================================================================

/**
 * mainChekingString() - –ì–û–õ–û–í–ù–ê —Ñ—É–Ω–∫—Ü—ñ—è –æ–±—Ä–æ–±–∫–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏—Ä–∞–∑—É
 * 
 * –õ–û–ì–Ü–ö–ê:
 * 1. –Ø–∫—â–æ –¥—É–∂–æ–∫ –Ω–µ–º–∞—î - –≤—ñ–¥—Ä–∞–∑—É –æ–±—á–∏—Å–ª—é—î–º–æ —á–µ—Ä–µ–∑ priorityOfSymbols()
 * 2. –Ø–∫—â–æ —î –¥—É–∂–∫–∏ - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–Ω—É –ø–∞—Ä—É –¥—É–∂–æ–∫:
 *    a) –ó–Ω–∞—Ö–æ–¥–∏–º–æ –Ω–∞–π–≥–ª–∏–±—à—É –ø–∞—Ä—É –¥—É–∂–æ–∫ "()"
 *    b) –û–±—á–∏—Å–ª—é—î–º–æ –≤–∏—Ä–∞–∑ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —á–µ—Ä–µ–∑ mathInsideBreckets()
 *    c) –ó–∞–º—ñ–Ω—é—î–º–æ –¥—É–∂–∫–∏ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
 *    d) –ü–æ–≤—Ç–æ—Ä—é—î–º–æ –ø–æ–∫–∏ –¥—É–∂–æ–∫ –Ω–µ –∑–∞–ª–∏—à–∏—Ç—å—Å—è
 * 
 * –ü–†–ò–ö–õ–ê–î:
 * "5+(3*(2+1))" ‚Üí
 * –ö—Ä–æ–∫ 1: (2+1) = 3 ‚Üí "5+(3*3)"
 * –ö—Ä–æ–∫ 2: (3*3) = 9 ‚Üí "5+9"
 * –ö—Ä–æ–∫ 3: 5+9 = 14
 * 
 * @param {string} anyString - –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏—Ä–∞–∑ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
 * @returns {number|string} - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∞–±–æ "Error 666" –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ
 */
function mainChekingString(anyString) {
    // –í–ò–ü–ê–î–û–ö 1: –í–∏—Ä–∞–∑ –ë–ï–ó –¥—É–∂–æ–∫ - –ø—Ä–æ—Å—Ç–æ –æ–±—á–∏—Å–ª—é—î–º–æ
    if (!anyString.includes('(')) {
        let finalResult = priorityOfSymbols(anyString)
        return finalResult;
    }
    
    // –í–ò–ü–ê–î–û–ö 2: –í–∏—Ä–∞–∑ –ó –¥—É–∂–∫–∞–º–∏ - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞
    else if (anyString.includes('(')) {
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –ø–æ–∑–∏—Ü—ñ—é –ü–ï–†–®–û–á –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏
        let indexOPENBrechet = anyString.indexOf('(');
        
        // –û–±—Ä–æ–±–ª—è—î–º–æ –≤–∏—Ä–∞–∑ –≤ –¥—É–∂–∫–∞—Ö (–º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Å–µ–±–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –¥—É–∂–æ–∫)
        let tempObj = mathInsideBreckets(anyString, indexOPENBrechet);
        
        // –ë—É–¥—É—î–º–æ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫: —á–∞—Å—Ç–∏–Ω–∞ –î–û –¥—É–∂–∫–∏ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç + —á–∞—Å—Ç–∏–Ω–∞ –ü–Ü–°–õ–Ø –¥—É–∂–∫–∏
        // –ü—Ä–∏–∫–ª–∞–¥: "5+(3*2)+1" ‚Üí "5+6+1"
        let newStr = anyString.slice(0, indexOPENBrechet) + 
                     tempObj.insideBrecketsResult + 
                     anyString.slice(tempObj.indexOfCLOSEBreckets + 1)
        
        // –†–ï–ö–£–†–°–ò–í–ù–ò–ô –í–ò–ö–õ–ò–ö: –æ–±—Ä–æ–±–ª—è—î–º–æ –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ (–º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —ñ–Ω—à—ñ –¥—É–∂–∫–∏)
        let finalResult = mainChekingString(newStr)
        return finalResult;
    }
}

/**
 * checkingString() - –ü–ê–†–°–ï–† –≤–∏—Ä–∞–∑—É, —Ä–æ–∑–¥—ñ–ª—è—î —Ä—è–¥–æ–∫ –Ω–∞ —á–∏—Å–ª–∞ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
 * 
 * –õ–û–ì–Ü–ö–ê –ü–ê–†–°–ò–ù–ì–£:
 * - –ó–±–∏—Ä–∞—î —Ü–∏—Ñ—Ä–∏ –≤ —á–∏—Å–ª–∞ (–≤–∫–ª—é—á–Ω–æ –∑ –¥–µ—Å—è—Ç–∫–æ–≤–∏–º–∏ –¥—Ä–æ–±–∞–º–∏)
 * - –û–±—Ä–æ–±–ª—è—î –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ —á–∏—Å–ª–∞ (–º—ñ–Ω—É—Å –Ω–∞ –ø–æ—á–∞—Ç–∫—É –∞–±–æ –ø—ñ—Å–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞)
 * - –†–æ–∑–¥—ñ–ª—è—î —á–∏—Å–ª–∞ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ –≤ –æ–∫—Ä–µ–º—ñ –º–∞—Å–∏–≤–∏
 * 
 * –ü–†–ò–ö–õ–ê–î:
 * –í—Ö—ñ–¥: "-5.5+3*2"
 * –í–∏—Ö—ñ–¥: {
 *   arrOfNumbers: ["-5.5", "3", "2"],
 *   arrOfSymbols: ["+", "*"]
 * }
 * 
 * @param {string} str - –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏—Ä–∞–∑
 * @returns {Object} - –æ–±'—î–∫—Ç –∑ –º–∞—Å–∏–≤–∞–º–∏ —á–∏—Å–µ–ª —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
 */
function checkingString(str) {
    // –°—Ç–∞—Ç–∏—á–Ω–∏–π –º–∞—Å–∏–≤ –≤—Å—ñ—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
    let staticArrOfSymbols = ['-', '+', '*', '/'];
    
    // –†–µ–∑—É–ª—å—Ç—É—é—á—ñ –º–∞—Å–∏–≤–∏
    let arrOfNumbers = [];   // –ú–∞—Å–∏–≤ —á–∏—Å–µ–ª: ["5", "3.14", "-2"]
    let arrOfSymbols = [];   // –ú–∞—Å–∏–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤: ["+", "*", "-"]
    
    // –¢–∏–º—á–∞—Å–æ–≤–∞ –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è —á–∏—Å–ª–∞ –∑ –∫—Ä–∞–ø–∫–æ—é (–¥–ª—è –¥—Ä–æ–±—ñ–≤)
    let numWithPoint = ''
    
    // Regex –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∏ —Å–∏–º–≤–æ–ª —î —Ü–∏—Ñ—Ä–æ—é
    let regExpForNums = /[0-9]/
    
    // –ü–ê–†–°–ò–ù–ì: –ø—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –∫–æ–∂–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É —Ä—è–¥–∫–∞
    for (let i = 0; i < str.length; i++) {
        
        // –ó–ë–ò–†–ê–ù–ù–Ø –¶–ò–§–†: —è–∫—â–æ —Å–∏–º–≤–æ–ª - —Ü–∏—Ñ—Ä–∞, –¥–æ–¥–∞—î–º–æ –¥–æ —á–∏—Å–ª–∞
        if (regExpForNums.test(str[i])) {
            numWithPoint += str[i];
        }
        
        // –û–ë–†–û–ë–ö–ê –ö–†–ê–ü–ö–ò: –¥–æ–¥–∞—î–º–æ –∫—Ä–∞–ø–∫—É, —è–∫—â–æ —ó—ó —â–µ –Ω–µ–º–∞—î –≤ —á–∏—Å–ª—ñ
        // –ó–∞–ø–æ–±—ñ–≥–∞—î –ø–æ–º–∏–ª–∫–∞–º —Ç–∏–ø—É "5.5.5"
        if (str[i] === '.' && !numWithPoint.includes('.')) {
            numWithPoint += str[i];
        }
        
        // –û–ë–†–û–ë–ö–ê –ù–ï–ì–ê–¢–ò–í–ù–ò–• –ß–ò–°–ï–õ:
        // –ú—ñ–Ω—É—Å —î —á–∞—Å—Ç–∏–Ω–æ—é —á–∏—Å–ª–∞ —è–∫—â–æ:
        // 1. –í—ñ–Ω –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ä—è–¥–∫–∞: "-5"
        // 2. –í—ñ–Ω –ø—ñ—Å–ª—è —ñ–Ω—à–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞: "5*-3"
        if (str[0] === '-' || str[i] === '-' && staticArrOfSymbols.includes(str[i - 1])) {
            numWithPoint += str[i]
        } 
        // –Ø–∫—â–æ –º—ñ–Ω—É—Å –ù–ï –ø—ñ—Å–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ - —Ü–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è
        else if (str[i] === '-' && !staticArrOfSymbols.includes(str[i - 1])) {
            arrOfNumbers.push(numWithPoint);  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—î —á–∏—Å–ª–æ
            arrOfSymbols.push(str[i]);        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –º—ñ–Ω—É—Å —è–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä
            numWithPoint = '';                // –°–∫–∏–¥–∞—î–º–æ –∑–±–∏—Ä–∞—á —á–∏—Å–ª–∞
        }
        
        // –û–ë–†–û–ë–ö–ê –û–ü–ï–†–ê–¢–û–†–Ü–í (+, *, /):
        // –Ø–∫—â–æ –∑—É—Å—Ç—Ä—ñ–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ü –≤–∂–µ —î –∑—ñ–±—Ä–∞–Ω–µ —á–∏—Å–ª–æ - –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –æ–±–∏–¥–≤–∞
        if (staticArrOfSymbols.includes(str[i]) && numWithPoint !== '') {
            arrOfSymbols.push(str[i]);        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä
            arrOfNumbers.push(numWithPoint);  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —á–∏—Å–ª–æ
            numWithPoint = '';                // –°–∫–∏–¥–∞—î–º–æ –∑–±–∏—Ä–∞—á
        }
    }
    
    // –ü—ñ—Å–ª—è —Ü–∏–∫–ª—É: —è–∫—â–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—å –∑—ñ–±—Ä–∞–Ω–µ —á–∏—Å–ª–æ - –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ
    if (numWithPoint !== '') {
        arrOfNumbers.push(numWithPoint)
    }
    
    // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ–±'—î–∫—Ç –∑ –¥–≤–æ–º–∞ –º–∞—Å–∏–≤–∞–º–∏
    let objOfElements = { arrOfNumbers, arrOfSymbols }
    return objOfElements
}

/**
 * mathInsideBreckets() - –†–ï–ö–£–†–°–ò–í–ù–ê —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏—Ä–∞–∑—ñ–≤ –≤ –¥—É–∂–∫–∞—Ö
 * 
 * –õ–û–ì–Ü–ö–ê:
 * 1. –†—É—Ö–∞—î–º–æ—Å—å –≤—ñ–¥ –ø–æ–∑–∏—Ü—ñ—ó –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏ –¥–æ –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó
 * 2. –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ —Å–∏–º–≤–æ–ª–∏ –º—ñ–∂ –¥—É–∂–∫–∞–º–∏
 * 3. –Ø–∫—â–æ –∑—É—Å—Ç—Ä—ñ—á–∞—î–º–æ –í–ö–õ–ê–î–ï–ù–£ –¥—É–∂–∫—É - –≤–∏–∫–ª–∏–∫–∞—î–º–æ —Å–µ–±–µ –†–ï–ö–£–†–°–ò–í–ù–û
 * 4. –ö–æ–ª–∏ –∑–Ω–∞—Ö–æ–¥–∏–º–æ –∑–∞–∫—Ä–∏–≤–∞—é—á—É –¥—É–∂–∫—É - –æ–±—á–∏—Å–ª—é—î–º–æ –≤–∏—Ä–∞–∑
 * 
 * –ü–†–ò–ö–õ–ê–î –í–ö–õ–ê–î–ï–ù–ò–• –î–£–ñ–û–ö:
 * "5+(3*(2+1))"
 * –í–∏–∫–ª–∏–∫ 1: –æ–±—Ä–æ–±–∫–∞ "(3*(2+1))"
 *   –í–∏–∫–ª–∏–∫ 2: –æ–±—Ä–æ–±–∫–∞ "(2+1)" ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î 3
 * –í–∏–∫–ª–∏–∫ 1 –ø—Ä–æ–¥–æ–≤–∂—É—î: "3*3" ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î 9
 * 
 * @param {string} insideBreckets - –ø–æ–≤–Ω–∏–π –≤–∏—Ä–∞–∑
 * @param {number} indexOfPositionBrecket - —ñ–Ω–¥–µ–∫—Å –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏
 * @returns {Object} - {insideBrecketsResult: —Ä–µ–∑—É–ª—å—Ç–∞—Ç, indexOfCLOSEBreckets: —ñ–Ω–¥–µ–∫—Å –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏}
 */
function mathInsideBreckets(insideBreckets, indexOfPositionBrecket) {
    // –ó–º—ñ–Ω–Ω—ñ –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    let insideBrecketsStr = '';       // –†—è–¥–æ–∫ –º—ñ–∂ –¥—É–∂–∫–∞–º–∏
    let insideBrecketsResult;         // –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
    let objOfinsideBreckets = {};     // –û–±'—î–∫—Ç –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
    let indexOfCLOSEBreckets;         // –Ü–Ω–¥–µ–∫—Å –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏
    let insideObj = {};               // –û–±'—î–∫—Ç –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
    
    // –ü—Ä–æ—Ö–æ–¥–∏–º–æ –≤—ñ–¥ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏ –¥–æ –∫—ñ–Ω—Ü—è —Ä—è–¥–∫–∞
    for (let i = indexOfPositionBrecket; i < insideBreckets.length; i++) {
        
        // –í–ò–ü–ê–î–û–ö 1: –ó—É—Å—Ç—Ä—ñ–ª–∏ –í–ö–õ–ê–î–ï–ù–£ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—á—É –¥—É–∂–∫—É
        // –ü—Ä–∏–∫–ª–∞–¥: –æ–±—Ä–æ–±–ª—è—î–º–æ "(3*(" —ñ –∑—É—Å—Ç—Ä—ñ—á–∞—î–º–æ –¥—Ä—É–≥—É "("
        if (insideBreckets[i] === '(') {
            // –†–ï–ö–£–†–°–ò–í–ù–ò–ô –í–ò–ö–õ–ò–ö: –æ–±—Ä–æ–±–ª—è—î–º–æ –≤–∫–ª–∞–¥–µ–Ω—ñ –¥—É–∂–∫–∏
            insideObj = mathInsideBreckets(insideBreckets, i + 1);
            
            // –î–æ–¥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –¥—É–∂–æ–∫ –¥–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä—è–¥–∫–∞
            insideBrecketsStr += insideObj.insideBrecketsResult;
            
            // –ü–µ—Ä–µ–º—ñ—â—É—î–º–æ —ñ–Ω–¥–µ–∫—Å –Ω–∞ –ø–æ–∑–∏—Ü—ñ—é –ø—ñ—Å–ª—è –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏ –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –≤–∏—Ä–∞–∑—É
            i = insideObj.indexOfCLOSEBreckets;
        }
        
        // –í–ò–ü–ê–î–û–ö 2: –ó—É—Å—Ç—Ä—ñ–ª–∏ –ó–ê–ö–†–ò–í–ê–Æ–ß–£ –¥—É–∂–∫—É - –∫—ñ–Ω–µ—Ü—å –ø–æ—Ç–æ—á–Ω–æ—ó –ø–∞—Ä–∏
        if (insideBreckets[i] === ')') {
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —ñ–Ω–¥–µ–∫—Å –∑–∞–∫—Ä–∏–≤–∞—é—á–æ—ó –¥—É–∂–∫–∏
            indexOfCLOSEBreckets = Number(i)
            
            // –û–ë–ß–ò–°–õ–ï–ù–ù–Ø: –æ–±—Ä–æ–±–ª—è—î–º–æ –∑—ñ–±—Ä–∞–Ω–∏–π –≤–∏—Ä–∞–∑ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –æ–ø–µ—Ä–∞—Ü—ñ–π
            insideBrecketsResult = priorityOfSymbols(insideBrecketsStr);
            
            // –§–æ—Ä–º—É—î–º–æ –æ–±'—î–∫—Ç –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è
            objOfinsideBreckets = { insideBrecketsResult, indexOfCLOSEBreckets }
            return objOfinsideBreckets;
        }
        
        // –í–ò–ü–ê–î–û–ö 3: –ó–≤–∏—á–∞–π–Ω–∏–π —Å–∏–º–≤–æ–ª (—Ü–∏—Ñ—Ä–∞ –∞–±–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä) - –¥–æ–¥–∞—î–º–æ –¥–æ —Ä—è–¥–∫–∞
        if (insideBreckets[i] !== '(' && insideBreckets[i] !== ')') {
            insideBrecketsStr += insideBreckets[i]
        }
    }
}

/**
 * priorityOfSymbols() - —Ñ—É–Ω–∫—Ü—ñ—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ –ü–†–Ü–û–†–ò–¢–ï–¢–û–ú –æ–ø–µ—Ä–∞—Ü—ñ–π
 * 
 * –ê–õ–ì–û–†–ò–¢–ú:
 * 1. –ü–∞—Ä—Å–∏–º–æ –≤–∏—Ä–∞–∑ –Ω–∞ —á–∏—Å–ª–∞ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
 * 2. –ü–ï–†–®–ò–ô –ü–†–û–•–Ü–î: –≤–∏–∫–æ–Ω—É—î–º–æ * —Ç–∞ / (–≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)
 * 3. –î–†–£–ì–ò–ô –ü–†–û–•–Ü–î: –≤–∏–∫–æ–Ω—É—î–º–æ + —Ç–∞ - (–Ω–∏–∂—á–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)
 * 4. –†–µ–∑—É–ª—å—Ç–∞—Ç - —î–¥–∏–Ω–µ —á–∏—Å–ª–æ —â–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—å
 * 
 * –ü–†–ò–ö–õ–ê–î:
 * –í—Ö—ñ–¥: "2+3*4"
 * 
 * –ü—ñ—Å–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É:
 * numbers: ["2", "3", "4"]
 * symbols: ["+", "*"]
 * 
 * –ü–µ—Ä—à–∏–π –ø—Ä–æ—Ö—ñ–¥ (* —Ç–∞ /):
 * - –ó–Ω–∞—Ö–æ–¥–∏–º–æ "*" –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó 1
 * - –û–±—á–∏—Å–ª—é—î–º–æ: 3 * 4 = 12
 * - numbers: ["2", "12"], symbols: ["+"]
 * 
 * –î—Ä—É–≥–∏–π –ø—Ä–æ—Ö—ñ–¥ (+ —Ç–∞ -):
 * - –ó–Ω–∞—Ö–æ–¥–∏–º–æ "+" –Ω–∞ –ø–æ–∑–∏—Ü—ñ—ó 0
 * - –û–±—á–∏—Å–ª—é—î–º–æ: 2 + 12 = 14
 * - numbers: ["14"], symbols: []
 * 
 * –†–µ–∑—É–ª—å—Ç–∞—Ç: 14
 * 
 * @param {string} anyStr - –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏—Ä–∞–∑ –ë–ï–ó –¥—É–∂–æ–∫
 * @returns {number|string} - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–±–æ "Error 666"
 */
function priorityOfSymbols(anyStr) {
    // –ö–†–û–ö 1: –ü–∞—Ä—Å–∏–Ω–≥ –≤–∏—Ä–∞–∑—É –Ω–∞ —á–∏—Å–ª–∞ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏
    let objDisplay = checkingString(anyStr)
    
    // –ö–æ–ø—ñ—é—î–º–æ –º–∞—Å–∏–≤–∏ –≤ —Ç–∏–º—á–∞—Å–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ (–±—É–¥–µ–º–æ —ó—Ö –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏)
    let temporaryResSYM = objDisplay.arrOfSymbols  // –ú–∞—Å–∏–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
    let temporaryResNUM = objDisplay.arrOfNumbers  // –ú–∞—Å–∏–≤ —á–∏—Å–µ–ª
    
    // –í–ê–õ–Ü–î–ê–¶–Ü–Ø 1: –Ø–∫—â–æ —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–µ —á–∏—Å–ª–æ –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ - –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –π–æ–≥–æ
    if (temporaryResSYM.length === 0 && temporaryResNUM.length === 1) {
        return temporaryResNUM[0]
    }
    
    // –í–ê–õ–Ü–î–ê–¶–Ü–Ø 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –≤–∏—Ä–∞–∑
    // –û–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –º–∞—î –±—É—Ç–∏ –ú–ï–ù–®–ï –Ω–∞ 1 –Ω—ñ–∂ —á–∏—Å–µ–ª
    // –ü—Ä–∞–≤–∏–ª—å–Ω–æ: "5+3" (2 —á–∏—Å–ª–∞, 1 –æ–ø–µ—Ä–∞—Ç–æ—Ä)
    // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: "5++3" (2 —á–∏—Å–ª–∞, 2 –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏) –∞–±–æ "+5" (1 —á–∏—Å–ª–æ, 1 –æ–ø–µ—Ä–∞—Ç–æ—Ä)
    if (temporaryResSYM.length > temporaryResNUM.length || 
        temporaryResSYM.length === 0 && temporaryResNUM.length === 0 || 
        temporaryResSYM.length === temporaryResNUM.length) {
        return (anyStr = 'Error 666')
    }
    
    // ========== –ü–ï–†–®–ò–ô –ü–†–û–•–Ü–î: –ú–ù–û–ñ–ï–ù–ù–Ø –¢–ê –î–Ü–õ–ï–ù–ù–Ø (–≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç) ==========
    for (let i = 0; i < temporaryResSYM.length; i++) {
        
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–Ω–æ–∂–µ–Ω–Ω—è
        if (temporaryResSYM[i] === '*') {
            // –û–±—á–∏—Å–ª—é—î–º–æ: —á–∏—Å–ª–æ[i] * —á–∏—Å–ª–æ[i+1]
            let innerResult = Number(temporaryResNUM[i]) * Number(temporaryResNUM[i + 1])
            
            // –í–ò–î–ê–õ–ï–ù–ù–Ø –û–ë–ß–ò–°–õ–ï–ù–ò–• –ï–õ–ï–ú–ï–ù–¢–Ü–í:
            temporaryResNUM[i] = innerResult;     // –ó–∞–º—ñ–Ω—é—î–º–æ –ø–µ—Ä—à–µ —á–∏—Å–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
            temporaryResNUM.splice(i + 1, 1)      // –í–∏–¥–∞–ª—è—î–º–æ –¥—Ä—É–≥–µ —á–∏—Å–ª–æ
            temporaryResSYM.splice(i, 1)          // –í–∏–¥–∞–ª—è—î–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä
            i--  // –ó–º–µ–Ω—à—É—î–º–æ —ñ–Ω–¥–µ–∫—Å, –±–æ –º–∞—Å–∏–≤ —Å–∫–æ—Ä–æ—Ç–∏–≤—Å—è
        } 
        
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –¥—ñ–ª–µ–Ω–Ω—è
        else if (temporaryResSYM[i] === '/') {
            // –ó–ê–•–ò–°–¢: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å
            if (temporaryResNUM[i + 1] === '0') {
                return (anyStr = 'Error 666')  // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–º–∏–ª–∫—É
            }
            
            // –û–±—á–∏—Å–ª—é—î–º–æ: —á–∏—Å–ª–æ[i] / —á–∏—Å–ª–æ[i+1]
            let innerResult = Number(temporaryResNUM[i]) / Number(temporaryResNUM[i + 1])
            
            // –í–ò–î–ê–õ–ï–ù–ù–Ø –û–ë–ß–ò–°–õ–ï–ù–ò–• –ï–õ–ï–ú–ï–ù–¢–Ü–í (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –º–Ω–æ–∂–µ–Ω–Ω—é)
            temporaryResNUM[i] = innerResult;
            temporaryResNUM.splice(i + 1, 1)
            temporaryResSYM.splice(i, 1)
            i--
        }
    }
    
    // ========== –î–†–£–ì–ò–ô –ü–†–û–•–Ü–î: –î–û–î–ê–í–ê–ù–ù–Ø –¢–ê –í–Ü–î–ù–Ü–ú–ê–ù–ù–Ø (–Ω–∏–∂—á–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç) ==========
    for (let i = 0; i < temporaryResSYM.length; i++) {
        
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –¥–æ–¥–∞–≤–∞–Ω–Ω—è
        if (temporaryResSYM[i] === '+') {
            let innerResult = Number(temporaryResNUM[i]) + Number(temporaryResNUM[i + 1])
            
            temporaryResNUM[i] = innerResult;
            temporaryResNUM.splice(i + 1, 1)
            temporaryResSYM.splice(i, 1)
            i--
        } 
        
        // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è
        else if (temporaryResSYM[i] === '-') {
            let innerResult = Number(temporaryResNUM[i]) - Number(temporaryResNUM[i + 1])
            
            temporaryResNUM[i] = innerResult;
            temporaryResNUM.splice(i + 1, 1)
            temporaryResSYM.splice(i, 1)
            i--
        }
    }
    
    // –†–ï–ó–£–õ–¨–¢–ê–¢: –ø—ñ—Å–ª—è –¥–≤–æ—Ö –ø—Ä–æ—Ö–æ–¥—ñ–≤ –∑–∞–ª–∏—à–∏–ª–æ—Å—å —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–µ —á–∏—Å–ª–æ
    // –ü—Ä–∏–∫–ª–∞–¥: ["14"] - —Ü–µ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    return temporaryResNUM[0]
}

// ============================================================================
// –ö–Ü–ù–ï–¶–¨ –ö–û–î–£
// ============================================================================
// –ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:
// User Input ‚Üí Validation ‚Üí Parsing ‚Üí Calculation (with priority) ‚Üí Display
//                ‚Üì              ‚Üì           ‚Üì
//          liveResults()  checkingString() priorityOfSymbols()
//                                 ‚Üì
//                         mathInsideBreckets() (–¥–ª—è –¥—É–∂–æ–∫)
// ============================================================================
